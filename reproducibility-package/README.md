The reproducibility-package includes all the files to replicate the result and plots in our paper. There are four subfolders corresponding to four sets of tests: `FMM_scaling`, `Laplace`, `Stokes_sphere` and `Stokes_rbc`. 


`Laplace`, `Stokes_sphere` and `Stokes_rbc` folders have a similar structure of contents:

- `autorun_*.sh`: the shell scripts to automatically run all tests

- `*.py`: python plotting script

- `*.pdf`: the plots generated by running the plotting scripts

- `*_fig_gen.sh`: collectively call `*.py` scripts to generate all figures at once

`FMM_scaling` folder includes only 1 test, so we don't have those shell scripts.

The `result` directory contains the raw output files from each test. `Dockerfile` file is the recipe to build a Docker image.

----------------------


**Please follow the steps below to reproduce the result in the paper.**


#### 1. build docker image

use the `Dockerfile` located at current directory to generate a docker image named `fmm-bem`:

`docker build -t fmm-bem ./`

or force a clean build of the image

`docker build --no-cache -t fmm-bem ./`

This step takes some time to download files, send build context to Docker daemon, install all the dependencies, pull our code from Github and eventually compile the code. 

#### 2. run the image in a new container

`docker run -v $(pwd):/data -it fmm-bem bash`

`-v` mounts the current directory of the host `$(pwd)` to `/data` of the container. Mounting the volume enables us to transfer files between them.

`-i` means interactive, and `-t` means to allocate a pseudo-tty. They are often written together as `-it`. `fmm-bem` is the image to use, and `bash` is the shell to use.

#### 3. copy the autorun scripts from local computer to the launched container

There are 3 autorun scripts: `autorun_Laplace.sh`, `autorun_Stokes_sphere.sh`, `autorun_Stokes_rbc.sh`

Take Laplace test as an example:

`cp /autorun_Laplace.sh ./`

copy autorun shell scripts from our reproducibility-package to the current directory in the launched container.

#### 4. execute the autorun scripts

`sudo chmod +x ./autorun_Laplace.sh` 

then

`./autorun_Laplace.sh`

#### 5. copy the generated result file in the launched container back to local computer

The default name of the result file is `Laplace_result`.

`cp ./Laplace_result /`

#### 6. plot

call the corresponding `*_fig_gen.sh` to plot using the result file:

For example:

`./Laplace_fig_gen.sh ../results/Laplace_result`
